<div id="content">
    <div class="row">
        <sa-big-breadcrumbs [items]="['Missions', 'Nouvelle']" icon="briefcase"
            class="col-xs-12 col-sm-7 col-md-7 col-lg-4"></sa-big-breadcrumbs>
    </div>
    <sa-widgets-grid>
        <!-- row -->
        <div class="row">
            <!-- NEW WIDGET START -->
            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <!-- Widget ID (each widget will need unique ID)-->
                <sa-widget color="blue" [colorbutton]="false" [deletebutton]="false" [editbutton]="false">
                    <!-- widget options:              usage: <sa-widget id="wid-id-0" [editbutton]="false">              [colorbutton]="false"              [editbutton]="false"              [togglebutton]="false"              [deletebutton]="false"              [fullscreenbutton]="false"              [custombutton]="false"              [collapsed]="true"              [sortable]="false"          -->
                    <header>
                        <h2>Nouvelle Mission</h2>
                    </header> <!-- widget div-->
                    <div>
                        <!-- widget content -->
                        <div class="widget-body">
                            <div class="row pull-left margin-bottom-5 padding-10">
                                <h4>Chargée de mission: {{authService.name}}</h4>
                            </div>
                            <div class="clearfix" style="border-bottom: solid 1px #eee"></div>
                            <ul class="nav nav-tabs pull-left in" id="myTab">
                                <li class="active"> <a data-toggle="tab" style="color: rgb(51, 51, 51) !important;"
                                        href="#s1"> <i class="fa fa-clock-o"></i> <span
                                            class="hidden-mobile hidden-tablet">Détails de la mission</span> </a> </li>
                                <li> <a data-toggle="tab" style="color: rgb(51, 51, 51) !important;" href="#s2"> <i
                                            class="fa fa-map-pin"></i> <span class="hidden-mobile hidden-tablet">Lieu du sinistre</span> </a> </li>
                            </ul>
                            <div class="clearfix"></div>
                            <div id="myTabContent" class="tab-content ">
                                <div class="tab-pane fade active in padding-10 no-padding-bottom bordered" id="s1">
                                    <div class="row">
                                        <div class="col-lg-6 container-info-list">
                                            <h5 class="text-primary"
                                                style="font-weight: bold !important; font-size: 14px !important;">INFOS
                                                SOUSCRIPTEUR</h5>
                                            <h6>Souscripteur</h6>
                                            <form class="form-horizontal">
                                                <fieldset>
                                                    <div class="form-group">
                                                        <div class="col-md-10">
                                                            <div class="input-group input-group-md">
                                                                <div class="icon-addon addon-md"> <input type="text"
                                                                        [(ngModel)]="souscripteurSearchStr" readonly
                                                                        placeholder="Souscripteur"
                                                                        name="souscripteurSearchStr"
                                                                        class="form-control">
                                                                    <!--<label for="email" class="glyphicon glyphicon-search" rel="tooltip" title="" data-original-title="email"></label>-->
                                                                </div> <span class="input-group-btn"> <button
                                                                        class="btn btn-success glyphicon glyphicon-search"
                                                                        type="button" style="top:0px;"
                                                                        (click)="lgModal.show()"></button> </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-md-10">
                                                            <div class="input-group input-group-md" style="width:100%">
                                                                <div class="icon-addon addon-md"> <input type="text"
                                                                        [(ngModel)]="numeroDossierSinistre"
                                                                        placeholder="Numéro de dossier de sinistre"
                                                                        name="NumeroDossierSinistre"
                                                                        class="form-control"> </div> <span
                                                                    class="input-group-btn"> </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Modification YAHYA 16/05/2022-->
                                                    <div class="form-group"> <!-- Phone 1 -->
                                                        <div class="col-md-10">
                                                            <div class="input-group input-group-md" style="width:100%">
                                                                <div class="icon-addon addon-md"> 
                                                                    <!--<input type="tel"
                                                                        [(ngModel)]="phone1"
                                                                        placeholder="Numéro de téléphone 1"
                                                                        name="phone1"
                                                                        pattern="^[+]?[(]?[0-9]{3}[)]?[-s.]?[0-9]{3}[-s.]?[0-9]{4,6}$"
                                                                        class="form-control"/>-->
                                                                    <input
                                                                    type="tel" name="phone1"
                                                                    placeholder="Numéro de téléphone 1"
                                                                    [(ngModel)]="phone" #phone1="ngModel"
                                                                    required
                                                                    pattern="^[+]?[(]?[0-9]{3}[)]?[-s.]?[0-9]{3}[-s.]?[0-9]{4,6}$"
                                                                    class="form-control" />
                                                                    </div> 
                                                                    <span
                                                                    *ngIf="!phone1.valid && phone1.touched && phone1.errors.pattern"
                                                                    class="help-block txt-color-redLight">Veuillez saisir un
                                                                    numéro de téléphone valide par exemple
                                                                    +2126611223344</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-md-10">
                                                            <div class="input-group input-group-md" style="width:100%">
                                                                <div class="icon-addon addon-md"> <input type="text"
                                                                        [(ngModel)]="numeroImmatriculation"
                                                                        placeholder="Numéro d'immatriculation"
                                                                        name="NumeroImmatriculation"
                                                                        class="form-control"> </div> <span
                                                                    class="input-group-btn"> </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Fin Modification YAHYA 16/05/2022-->
                                                    <div class="form-group">
                                                        <div class="col-md-10">
                                                            <div class="input-group input-group-md" style="width:100%">
                                                                <div class="icon-addon addon-md"> <textarea
                                                                        [(ngModel)]="commentaireDossier"
                                                                        placeholder="Commentaire"
                                                                        name="CommentaireDossierSinistre"
                                                                        class="form-control" rows="5"></textarea> </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div class="col-lg-6">
                                            <h5 class="text-primary"
                                                style="font-weight: bold !important; font-size: 14px !important;">INFOS
                                                PRESTATAIRE</h5>
                                            <h6>Prestataire</h6>
                                            <form class="form-horizontal">
                                                <fieldset>
                                                    <div class="form-group">
                                                        <div class="col-md-10">
                                                            <div class="input-group input-group-md">
                                                                <div class="icon-addon addon-md"> <input type="text"
                                                                        [(ngModel)]="contractSearchStr" readonly
                                                                        name="contractSearchStr"
                                                                        placeholder="Prestataire" class="form-control">
                                                                    <!--<label for="email" class="glyphicon glyphicon-search" rel="tooltip" title="" data-original-title="email"></label>-->
                                                                </div> <span class="input-group-btn"> <button
                                                                        class="btn btn-success glyphicon glyphicon-search"
                                                                        type="button" style="top:0px;"
                                                                        (click)="prestModal.show()"></button> </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade in padding-10 no-padding-bottom bordered" id="s2">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="well well-sm well-light"
                                                style="margin-bottom: 5px;padding-top: 15px;padding-bottom: 0px;">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="row" style="margin-left: -9px;margin-right: -9px;">
                                                            <form action="" id="checkout-form" class="smart-form"
                                                                novalidate="novalidate" style="margin-top:-15px">
                                                                <fieldset>
                                                                    <div class="row">
                                                                        <section class="col col-4"> <label
                                                                                class="input"> <i
                                                                                    class="icon-prepend fa fa-map-pin"></i>
                                                                                <input type="number" name="fname"
                                                                                    [(ngModel)]="myLatLong.lat"
                                                                                    placeholder="Lattitude" step="0.000001"> </label>
                                                                        </section>
                                                                        <section class="col col-4"> <label
                                                                                class="input"> <i
                                                                                    class="icon-prepend fa fa-map-pin"></i>
                                                                                <input type="number" name="lname"
                                                                                    [(ngModel)]="myLatLong.lng"
                                                                                    placeholder="Longitude" step="0.000001"> </label>
                                                                        </section>
                                                                        <section class="col col-4"> <a class="btn btn-primary btn-sm"
                                                                                href="javascript:void(0);" id="buttonNaviguer">Naviguer</a>
                                                                        </section>
                                                                    </div>
                                                                </fieldset>
                                                            </form>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="row" style="margin-left: -9px;margin-right: -9px;">
                                                            <form action="" id="checkout-form" class="smart-form"
                                                                novalidate="novalidate" style="margin-top:-15px">
                                                                <fieldset>
                                                                    <div class="row">
                                                                        <section class="col col-8"> <label
                                                                                class="input"> <i
                                                                                    class="icon-prepend fa fa-building-o"></i>
                                                                                <input type="text" name="fname"
                                                                                    [(ngModel)]="adresse" #addressSearch
                                                                                    placeholder="Adresse"> </label>
                                                                        </section>
                                                                    </div>
                                                                </fieldset>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="alert alert-info fade in"> <strong>Adresse :</strong> {{address}} </div>
                                    <div id="map-canvas" class="sa-fx-col"> </div>
                                    <div class="row info-list-action-container"> <a href="#"
                                            (click)="saveMission($event)"
                                            class="btn btn-sm btn-primary pull-right">Enregistrer La Mission</a> </div>
                                </div>
                            </div>
                        </div> <!-- end widget content -->
                    </div> <!-- end widget div -->
                </sa-widget>
            </article>
        </div>
    </sa-widgets-grid>
    <!--modal-->
    <div bsModal #lgModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
        aria-hidden="true" [config]="{ backdrop: 'static', keyboard  : false }">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header"> <button type="button" class="close" (click)="lgModal.hide()"
                        aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                    <h4 class="modal-title"><i class="glyphicon glyphicon-search"></i> Recherche Souscripteur</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="well well-sm well-light">
                                <form class="form">
                                    <fieldset>
                                        <div class="form-group">
                                            <div class="col-md-4">
                                                <div class="input-group input-group-md">
                                                    <div class="icon-addon addon-md"> <input type="text"
                                                            [(ngModel)]="souscripteurSearchStr"
                                                            placeholder="Souscripteur" name="souscripteurSearchStr"
                                                            class="form-control"> <label for="email"
                                                            class="glyphicon glyphicon-search" rel="tooltip" title=""
                                                            data-original-title="email"></label> </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6"> <button type="button" class="btn btn-primary"
                                                    (click)="searchSubscriber()"> Rechercher </button> </div>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <ag-grid-angular style="width: 100%; height: 400px;" class="ag-theme-balham"
                                [enableSorting]="true" [enableFilter]="true" [rowData]="SouscripteurGridrowData"
                                [columnDefs]="SouscripteurGridcolumnDefs" [rowSelection]="rowSelection"
                                [enableColResize]="true" [pagination]="true" [debug]="true" [localeText]="localeText"
                                (selectionChanged)="onSouscripteurGridSelectionChanged($event)"
                                (gridReady)="onSouscripteurGridGridReady($event)"
                                (rowDoubleClicked)="onSouscripteurGridRowDoubleClicked($event)"> </ag-grid-angular>
                        </div>
                    </div>
                </div>
                <div class="modal-footer"> <button type="button" class="btn btn-default" (click)="lgModal.hide()">
                        Annuler </button> <button type="button" class="btn btn-success"
                        [disabled]="!selectedSouscripteur" (click)="hideChildModal()"> Selectionner </button> </div>
            </div>
        </div>
    </div>
    <div bsModal #prestModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
        aria-labelledby="myLargeModalLabel" aria-hidden="true" [config]="{ backdrop: 'static', keyboard  : false }">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header"> <button type="button" class="close" (click)="prestModal.hide()"
                        aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                    <h4 class="modal-title"><i class="glyphicon glyphicon-search"></i> Recherche Prestataire</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="well well-sm well-light">
                                <form class="form">
                                    <fieldset>
                                        <div class="form-group">
                                            <div class="col-md-4">
                                                <div class="input-group input-group-md">
                                                    <div class="icon-addon addon-md"> <input type="text"
                                                            [(ngModel)]="contractSearchStr" placeholder="Prestataire"
                                                            name="contractSearchStr" class="form-control"> <label
                                                            for="email" class="glyphicon glyphicon-search" rel="tooltip"
                                                            title="" data-original-title="email"></label> </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6"> <button type="button" class="btn btn-primary"
                                                    (click)="searchPrestataire()"> Rechercher </button> </div>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <ag-grid-angular style="width: 100%; height: 400px;" class="ag-theme-balham"
                                [enableSorting]="true" [enableFilter]="true" [rowData]="PrestataireGridrowData"
                                [columnDefs]="PrestataireGridcolumnDefs" [rowSelection]="rowSelection"
                                [enableColResize]="true" [pagination]="true" [debug]="true" [localeText]="localeText"
                                (selectionChanged)="onPrestataireGridSelectionChanged($event)"
                                (gridReady)="onPrestataireGridGridReady($event)"
                                (rowDoubleClicked)="onPrestataireGridRowDoubleClicked($event)"> </ag-grid-angular>
                        </div>
                    </div>
                </div>
                <div class="modal-footer"> <button type="button" class="btn btn-default" (click)="prestModal.hide()">
                        Annuler </button> <button type="button" [disabled]="!selectedPrestataire"
                        (click)="prestModal.hide()" class="btn btn-success"> Selectionner </button> </div>
            </div>
        </div>
    </div>
</div>